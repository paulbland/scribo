
<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Scrībō | The index card app for screenwriters</title>
	<link rel="stylesheet" type="text/css" href="normalize.css">
 	<link rel="stylesheet" type="text/css" href="main.css">

 		<link href='http://fonts.googleapis.com/css?family=Just+Another+Hand' rel='stylesheet' type='text/css'>


   


    	<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
	<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script>

    <script src="main.js"></script>


<script>
		var app = app || {};

		$(function() {

			// Model
			app.CardModel = Backbone.Model.extend({});

			// Collection
			app.CardCollection = Backbone.Collection.extend({
			  	model: app.CardModel,
			  	url: 'cards.json'
			});

			// Create new collectino
		 	app.cards = new app.CardCollection();

		 	// get cards collection
			app.cards.fetch();



		  app.AppView = Backbone.View.extend({
		     el: $('#cards'),

		     initialize: function() {
				this.listenTo(app.cards, 'reset', this.addAll);
	     		app.cards.fetch({reset: true});
	        },

			addOne: function (card) {
				var view = new app.CardView({ model: card });
				this.$el.append(view.render().el);
			},

			// Add all items in the **Todos** collection at once.
			addAll: function () {
				app.cards.each(this.addOne, this);

				$( "#cards" ).sortable();
    			$( "#cards" ).disableSelection();
			}
		});


		  app.CardView = Backbone.View.extend({

		  	tagName: 'li',

		  	className: function() {
		  		return 'card style-' + this.model.get('color');
		  	},

		     template: _.template( $('#card-template').html() ),

		     render: function () {

		     		this.$el.html(this.template(this.model.toJSON()));
		     		return this;
		     	}

		  });

		 new app.AppView();


			
	});
	</script>



</head>

<body class="classic">

	<h1>Scrībō</h1>

	<nav>
		<div class="settings">
			<fieldset>
				<legend>Theme</legend>
				<label><input type="radio" name="theme" value="classic" checked> Classic</label>
				<label><input type="radio" name="theme" value="modern"> Modern</label>
			</fieldset>
		</div>
	</nav>

	<main>
		<ul id="cards"></ul>
	</main>

	<div class="status">O Saving...</div>

	<script type="text/template" id="card-template">
		<!-- <div class="card style-<%= color %>"> -->
		 	<textarea placeholder="Type here..."><%= text %></textarea>
		<!-- </div> -->
	</script>

</body>

</html>